<!DOCTYPE html>
<meta charset="utf-8">
<head>
<title>
Star-Date
</title>
</head>
<style>

	body {
		font: 14px sans-serif;
		background: #272822;
		color: #d3d3d3;
	}

	.axis path, .axis line {
		fill: none;
		stroke: #000;
		shape-rendering: crispEdges;
	}

	.circle {
		stroke: #000;
	}

 	.svg {
		width: 100%;
		height: 100%;
	}
	h1{
		text-align: center;
	}
	.header{
		position: fixed;
	}
	.logo {
		text-align: left;
	}
	#content {
  		margin-left:  20%;
	}
	#infobox {
  		float: left;
  		width: 15%;
	}
</style>
<body>
	<h1 class='logo'>Star-Date</h1>
	<!-- <h1 class='intro'>We see light coming from stars that left (X) light years ago. In the same way, those stars RIGHT NOW will see light (including radio waves) that left Earth (x) light years ago. Cick on a star, and see what was happening on earth when that star light we see now left that star</h1> -->
	<div id="container">
  		<div id="infobox">text goes here</div>
  		<div id="content"></div>
	</div>	
	<script src="http://d3js.org/d3.v2.js?2.9.6"></script>
	<script>
		var x = d3.scale.linear()
               .range([0, 1200]);

               var y = d3.scale.linear()
               .range([700, 0]);

		var infobox = d3.select("#infobox");	// select our p tag
			infobox.style("visibility", "hidden");


		var svg = d3.select("#content").append("svg")
		.attr('class', 'svg')
		.attr("width", 1000)
		.attr("height",500)
		.append("g")

		d3.csv(href="https://jobwaffle.s3.amazonaws.com/amnh_data.csv", function(data) {

		// Coerce the strings to numbers.
		data.forEach(function(d) {
			d.x = +d.x;
			d.y = +d.y;
			d.date = new Date(d.date_x);
			d.color = d.color;
			d.lum = d.lum;
			d.distly = d.distly;
			d.headline = d.headline;
			d.snippet = d.snippet;
			d.link = d.link;
			d.appmag = d.appmag;
		});

		// Compute the scalesâ€™ domains.
		x.domain(d3.extent(data, function(d) { return d.x; })).nice();
		y.domain(d3.extent(data, function(d) { return d.y; })).nice();


		// Add the points!
		svg.selectAll(".circle")
		.data(data)
		.enter().append("circle")
		.attr("class", "circle")
		.attr("d", d3.svg.symbol().type("circle"))
		.attr("transform", function(d) { return "translate(" + x(d.x) + "," + y(d.y) + ")"; })
		.attr("r", function(d) {
					return d.appmag; })
		.attr("fill", function(d){return d.color;})
		.attr("opacity", .65)
		.on("mouseover", function(d) {
			var circle = d3.select(this);

			var infobox = d3.select("#infobox"); // select our p tag
			infobox.style("visibility", "visible");	// on mouse over, it should be visible
			if (d.x == 0)
				infobox.html("<h3>Our Sun</h3><BR/> 0 light years away");
			else
				infobox.html(
					"<h3>Distance: </h3>" + d.distly + " light years away</span><BR /><BR /><h3>"
					+  d.date.toDateString() + " " + d.headline + "</h3><BR />" + d.snippet 
					+ "<BR /> <A HREF=\"" + d.link + "\">link to story</a>");
			d3.select(this).transition().duration(500).attr("r", d.appmag * 1.5)

		})
		.on("mouseout", function(d) {
			var circle = d3.select(this);
			d3.select(this).transition().duration(500).attr("r", d.appmag)

		})

		.filter(function(d) { return d.x ==0; })
			.style("fill", "#FFF5F2")
		});

	</script>
	</div>
	</body>
</html>


